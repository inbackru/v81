#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–±–æ—Ä–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ —Ä–∞–π–æ–Ω–∞—Ö –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è generic —Å—Å—ã–ª–æ–∫
"""
import requests
import json
import re
from datetime import datetime

def collect_district_data():
    """–°–æ–±–∏—Ä–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Ä–∞–π–æ–Ω–∞—Ö –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞ –∏–∑ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤"""
    
    # Mapping district names to their slugs and real data
    districts_mapping = {
        # –ü–µ—Ä–≤—ã–µ 4 —É–∂–µ –µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ app.py
        '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π': {
            'slug': 'tsentralnyy',
            'status': 'complete'
        },
        '40 –ª–µ—Ç –ü–æ–±–µ–¥—ã': {
            'slug': '40-let-pobedy', 
            'status': 'complete'
        },
        '9-–π –∫–∏–ª–æ–º–µ—Ç—Ä': {
            'slug': '9i-kilometr',
            'status': 'complete' 
        },
        '–ê–≤–∏–∞–≥–æ—Ä–æ–¥–æ–∫': {
            'slug': 'aviagorodok',
            'status': 'complete'
        },
        
        # –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è —ç—Ç–∏—Ö —Ä–∞–π–æ–Ω–æ–≤
        '–ê–≤—Ä–æ—Ä–∞': {
            'slug': 'avrora',
            'name': '–ê–≤—Ä–æ—Ä–∞',
            'subtitle': '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω —Å —Ä–∞–∑–≤–∏—Ç–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π',
            'admin_district': '–ü—Ä–∏–∫—É–±–∞–Ω—Å–∫–∏–π –æ–∫—Ä—É–≥',
            'area_type': '–ñ–∏–ª–æ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π',
            'building_type': '–ù–æ–≤–∞—è –º–Ω–æ–≥–æ—ç—Ç–∞–∂–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞',
            'transport': '–ê–≤—Ç–æ–±—É—Å—ã, –º–∞—Ä—à—Ä—É—Ç–∫–∏, —Ö–æ—Ä–æ—à–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ü–µ–Ω—Ç—Ä–æ–º',
            'avg_price': '58 000',
            'avg_cashback': '290 000',
            'rating': 4,
            'properties_count': 12,
            'description': '–ú–∏–∫—Ä–æ—Ä–∞–π–æ–Ω –ê–≤—Ä–æ—Ä–∞ ‚Äî –æ–¥–∏–Ω –∏–∑ –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—é—â–∏—Ö—Å—è —Ä–∞–π–æ–Ω–æ–≤ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞. –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤ –ü—Ä–∏–∫—É–±–∞–Ω—Å–∫–æ–º –æ–∫—Ä—É–≥–µ, –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞—Å—Ç—Ä–æ–π–∫–æ–π –∏ —Ö–æ—Ä–æ—à–µ–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é. –í —Ä–∞–π–æ–Ω–µ –∞–∫—Ç–∏–≤–Ω–æ —Å—Ç—Ä–æ—è—Ç—Å—è –Ω–æ–≤—ã–µ –∂–∏–ª—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã.',
            'keywords': '–Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–∞–π–æ–Ω, –ü—Ä–∏–∫—É–±–∞–Ω—Å–∫–∏–π',
            'advantages': [
                '–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞',
                '–†–∞–∑–≤–∏–≤–∞—é—â–∞—è—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞', 
                '–•–æ—Ä–æ—à–∞—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å',
                '–ù–æ–≤—ã–µ –¥–µ—Ç—Å–∫–∏–µ —Å–∞–¥—ã –∏ —à–∫–æ–ª—ã'
            ],
            'disadvantages': [
                '–†–∞–π–æ–Ω –µ—â–µ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è',
                '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π',
                '–£–¥–∞–ª–µ–Ω–Ω–æ—Å—Ç—å –æ—Ç —Ü–µ–Ω—Ç—Ä–∞'
            ],
            'coordinates': [45.0548, 38.9825],  # –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
            'boundaries': [[45.05, 38.98], [45.06, 38.99], [45.05, 39.0], [45.04, 38.99]]
        },
        
        '–ë–∞—Å–∫–µ—Ç-–•–æ–ª–ª': {
            'slug': 'basket-hall',
            'name': '–ë–∞—Å–∫–µ—Ç-–•–æ–ª–ª',
            'subtitle': '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π —Ä–∞–π–æ–Ω —Ä—è–¥–æ–º —Å –ª–µ–¥–æ–≤—ã–º –¥–≤–æ—Ä—Ü–æ–º',
            'admin_district': '–ü—Ä–∏–∫—É–±–∞–Ω—Å–∫–∏–π –æ–∫—Ä—É–≥',
            'area_type': '–°–ø–æ—Ä—Ç–∏–≤–Ω–æ-—Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π',
            'building_type': '–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–Ω–æ–≥–æ—ç—Ç–∞–∂–Ω–∞—è', 
            'transport': '–ê–≤—Ç–æ–±—É—Å—ã, –±–ª–∏–∑–∫–æ –∫ —Ü–µ–Ω—Ç—Ä—É',
            'avg_price': '62 000',
            'avg_cashback': '310 000', 
            'rating': 4,
            'properties_count': 8,
            'description': '–ú–∏–∫—Ä–æ—Ä–∞–π–æ–Ω –ë–∞—Å–∫–µ—Ç-–•–æ–ª–ª –ø–æ–ª—É—á–∏–ª —Å–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –±–ª–∏–∑–æ—Å—Ç–∏ –∫ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–º—É –∫–æ–º–ø–ª–µ–∫—Å—É "–ë–∞—Å–∫–µ—Ç-–•–æ–ª–ª". –†–∞–π–æ–Ω –∏–∑–≤–µ—Å—Ç–µ–Ω —Ä–∞–∑–≤–∏—Ç–æ–π —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∂–∏–ª—ã–º–∏ –∫–æ–º–ø–ª–µ–∫—Å–∞–º–∏.',
            'keywords': '—Å–ø–æ—Ä—Ç, –ë–∞—Å–∫–µ—Ç-–•–æ–ª–ª, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ñ–ö',
            'advantages': [
                '–†–∞–∑–≤–∏—Ç–∞—è —Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞',
                '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∂–∏–ª—ã–µ –∫–æ–º–ø–ª–µ–∫—Å—ã',
                '–ë–ª–∏–∑–æ—Å—Ç—å –∫ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º —Ü–µ–Ω—Ç—Ä–∞–º',
                '–•–æ—Ä–æ—à–∞—è —ç–∫–æ–ª–æ–≥–∏—è'
            ],
            'disadvantages': [
                '–í—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∂–∏–ª—å—è',
                '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∫–æ–ª',
                '–ü—Ä–æ–±–∫–∏ –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–Ω–∏'
            ],
            'coordinates': [45.0402, 38.9632],
            'boundaries': [[45.035, 38.96], [45.045, 38.97], [45.04, 38.975], [45.035, 38.965]]
        },
        
        '–ì–∏–¥—Ä–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π': {
            'slug': 'gidrostroitelei', 
            'status': 'complete'  # –£–∂–µ –µ—Å—Ç—å –≤ app.py
        },
        
        '–î—É–±–∏–Ω–∫–∞': {
            'slug': 'dubinka',
            'name': '–î—É–±–∏–Ω–∫–∞',
            'subtitle': '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ä–∞–π–æ–Ω —Å –∑–µ–ª–µ–Ω—ã–º–∏ —É–ª–∏—Ü–∞–º–∏',
            'admin_district': '–ó–∞–ø–∞–¥–Ω—ã–π –æ–∫—Ä—É–≥',
            'area_type': '–ß–∞—Å—Ç–Ω—ã–π —Å–µ–∫—Ç–æ—Ä',
            'building_type': '–ß–∞—Å—Ç–Ω—ã–µ –¥–æ–º–∞ –∏ –º–∞–ª–æ—ç—Ç–∞–∂–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞',
            'transport': '–ê–≤—Ç–æ–±—É—Å—ã, –º–∞—Ä—à—Ä—É—Ç–∫–∏',
            'avg_price': '45 000',
            'avg_cashback': '225 000',
            'rating': 3,
            'properties_count': 6,
            'description': '–î—É–±–∏–Ω–∫–∞ ‚Äî –æ–¥–∏–Ω –∏–∑ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ä–∞–π–æ–Ω–æ–≤ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞, –∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–≤–æ–∏–º–∏ –∑–µ–ª–µ–Ω—ã–º–∏ —É–ª–∏—Ü–∞–º–∏ –∏ —á–∞—Å—Ç–Ω—ã–º–∏ –¥–æ–º–∞–º–∏. –†–∞–π–æ–Ω —Å–æ—Ö—Ä–∞–Ω–∏–ª —Å–∞–º–æ–±—ã—Ç–Ω—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É —Å—Ç–∞—Ä–æ–≥–æ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞.',
            'keywords': '—á–∞—Å—Ç–Ω—ã–π —Å–µ–∫—Ç–æ—Ä, –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π, –∑–µ–ª–µ–Ω—ã–µ —É–ª–∏—Ü—ã',
            'advantages': [
                '–¢–∏—Ö–∏–µ –∑–µ–ª–µ–Ω—ã–µ —É–ª–∏—Ü—ã',
                '–ß–∞—Å—Ç–Ω—ã–µ –¥–æ–º–∞ —Å —É—á–∞—Å—Ç–∫–∞–º–∏', 
                '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞',
                '–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–µ–Ω—ã'
            ],
            'disadvantages': [
                '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞',
                '–ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Ä–æ–≥–∞–º–∏',
                '–ú–∞–ª–æ –Ω–æ–≤–æ—Å—Ç—Ä–æ–µ–∫'
            ],
            'coordinates': [45.0145, 38.9234],
            'boundaries': [[45.01, 38.92], [45.02, 38.925], [45.015, 38.93], [45.01, 38.925]]
        },

        '–ï–Ω–∏—Å–µ–π—Å–∫–∏–π': {
            'slug': 'eniseyskiy',
            'name': '–ï–Ω–∏—Å–µ–π—Å–∫–∏–π',
            'subtitle': '–†–∞–∑–≤–∏–≤–∞—é—â–∏–π—Å—è —Ä–∞–π–æ–Ω —Å –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∞–º–∏',
            'admin_district': '–ö–∞—Ä–∞—Å—É–Ω—Å–∫–∏–π –æ–∫—Ä—É–≥', 
            'area_type': '–ñ–∏–ª–æ–π —Ä–∞–∑–≤–∏–≤–∞—é—â–∏–π—Å—è',
            'building_type': '–ù–æ–≤–∞—è –º–Ω–æ–≥–æ—ç—Ç–∞–∂–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞',
            'transport': '–ê–≤—Ç–æ–±—É—Å—ã, —Ä–∞–∑–≤–∏–≤–∞—é—â–∞—è—Å—è —Å–µ—Ç—å',
            'avg_price': '52 000',
            'avg_cashback': '260 000',
            'rating': 4,
            'properties_count': 14,
            'description': '–ï–Ω–∏—Å–µ–π—Å–∫–∏–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω ‚Äî –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—é—â–∏–π—Å—è —Ä–∞–π–æ–Ω –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞ –≤ –ö–∞—Ä–∞—Å—É–Ω—Å–∫–æ–º –æ–∫—Ä—É–≥–µ. –ü–æ–ø—É–ª—è—Ä–µ–Ω —Å—Ä–µ–¥–∏ –º–æ–ª–æ–¥—ã—Ö —Å–µ–º–µ–π –±–ª–∞–≥–æ–¥–∞—Ä—è –¥–æ—Å—Ç—É–ø–Ω—ã–º —Ü–µ–Ω–∞–º –∏ –Ω–æ–≤–æ–π –∑–∞—Å—Ç—Ä–æ–π–∫–µ.',
            'keywords': '–Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏, –º–æ–ª–æ–¥—ã–µ —Å–µ–º—å–∏, –ö–∞—Ä–∞—Å—É–Ω—Å–∫–∏–π',
            'advantages': [
                '–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–µ–Ω—ã –Ω–∞ –∂–∏–ª—å–µ',
                '–ê–∫—Ç–∏–≤–Ω–æ–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ',
                '–ù–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞',
                '–•–æ—Ä–æ—à–∞—è —ç–∫–æ–ª–æ–≥–∏—è'
            ],
            'disadvantages': [
                '–£–¥–∞–ª–µ–Ω–Ω–æ—Å—Ç—å –æ—Ç —Ü–µ–Ω—Ç—Ä–∞',
                '–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –µ—â–µ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è',
                '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç'
            ],
            'coordinates': [45.0890, 38.8945],
            'boundaries': [[45.085, 38.89], [45.095, 38.90], [45.09, 38.905], [45.085, 38.895]]
        },

        '–†–∞–π–æ–Ω –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞': {
            'slug': 'aeroport',
            'name': '–†–∞–π–æ–Ω –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞', 
            'subtitle': '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ-–ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —É–∑–µ–ª –≥–æ—Ä–æ–¥–∞',
            'admin_district': '–ü—Ä–∏–∫—É–±–∞–Ω—Å–∫–∏–π –æ–∫—Ä—É–≥',
            'area_type': '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ-–ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–π',
            'building_type': '–°–º–µ—à–∞–Ω–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞',
            'transport': '–û—Ç–ª–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∞—ç—Ä–æ–ø–æ—Ä—Ç',
            'avg_price': '48 000',
            'avg_cashback': '240 000',
            'rating': 3,
            'properties_count': 7,
            'description': '–†–∞–π–æ–Ω –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞ ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ-–ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —É–∑–µ–ª. –£–¥–æ–±–µ–Ω –¥–ª—è –ª—é–¥–µ–π, —á–∞—Å—Ç–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤—É—é—â–∏—Ö, –Ω–æ –∏–º–µ–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫—É —à—É–º–æ–≤–æ–≥–æ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è.',
            'keywords': '–∞—ç—Ä–æ–ø–æ—Ä—Ç, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –ª–æ–≥–∏—Å—Ç–∏–∫–∞',
            'advantages': [
                '–ë–ª–∏–∑–æ—Å—Ç—å –∫ –∞—ç—Ä–æ–ø–æ—Ä—Ç—É',
                '–û—Ç–ª–∏—á–Ω–∞—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å',
                '–†–∞–∑–≤–∏–≤–∞—é—â–∞—è—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞',
                '–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ü–µ–Ω—ã'
            ],
            'disadvantages': [
                '–®—É–º –æ—Ç —Å–∞–º–æ–ª–µ—Ç–æ–≤',
                '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞',
                '–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã'
            ],
            'coordinates': [45.0235, 39.1456],
            'boundaries': [[45.02, 39.14], [45.03, 39.15], [45.025, 39.155], [45.02, 39.145]]
        },

        '–†–µ–ø–∏–Ω–æ': {
            'slug': 'repino',
            'name': '–†–µ–ø–∏–Ω–æ',
            'subtitle': '–¢–≤–æ—Ä—á–µ—Å–∫–∏–π —Ä–∞–π–æ–Ω —Å –ø–∞—Ä–∫–∞–º–∏',
            'admin_district': '–ó–∞–ø–∞–¥–Ω—ã–π –æ–∫—Ä—É–≥',
            'area_type': '–¢–≤–æ—Ä—á–µ—Å–∫–æ-–∂–∏–ª–æ–π',
            'building_type': '–ú–∞–ª–æ—ç—Ç–∞–∂–Ω–∞—è –∏ —á–∞—Å—Ç–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞',
            'transport': '–ê–≤—Ç–æ–±—É—Å—ã, —Å–ø–æ–∫–æ–π–Ω—ã–π —Ä–∞–π–æ–Ω',
            'avg_price': '51 000',
            'avg_cashback': '255 000',
            'rating': 4,
            'properties_count': 5,
            'description': '–ú–∏–∫—Ä–æ—Ä–∞–π–æ–Ω –†–µ–ø–∏–Ω–æ ‚Äî –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –∑–µ–ª–µ–Ω—ã—Ö –∏ —Å–ø–æ–∫–æ–π–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞. –ü–æ–ø—É–ª—è—Ä–µ–Ω —Å—Ä–µ–¥–∏ —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –ª—é–¥–µ–π –∏ —Å–µ–º–µ–π —Å –¥–µ—Ç—å–º–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –ø–∞—Ä–∫–∞–º –∏ —Ç–∏—à–∏–Ω–µ.',
            'keywords': '—Ç–≤–æ—Ä—á–µ—Å–∫–∏–π, –∑–µ–ª–µ–Ω—ã–π, –ø–∞—Ä–∫–∏, —Ç–∏—à–∏–Ω–∞',
            'advantages': [
                '–ú–Ω–æ–≥–æ –∑–µ–ª–µ–Ω–∏ –∏ –ø–∞—Ä–∫–æ–≤',
                '–°–ø–æ–∫–æ–π–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞',
                '–¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Å—Ä–µ–¥–∞',
                '–•–æ—Ä–æ—à–∞—è —ç–∫–æ–ª–æ–≥–∏—è'
            ],
            'disadvantages': [
                '–£–¥–∞–ª–µ–Ω–Ω–æ—Å—Ç—å –æ—Ç —Ü–µ–Ω—Ç—Ä–∞',
                '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞',
                '–ú–∞–ª–æ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ü–µ–Ω—Ç—Ä–æ–≤'
            ],
            'coordinates': [44.9867, 38.9123],
            'boundaries': [[44.98, 38.91], [44.99, 38.915], [44.985, 38.92], [44.98, 38.915]]
        },

        '–°–ú–†': {
            'slug': 'smr',
            'name': '–°–ú–† (–°–ª–∞–≤—è–Ω—Å–∫–∏–π)',
            'subtitle': '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ä–∞–π–æ–Ω –≥–æ—Ä–æ–¥–∞',
            'admin_district': '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ–∫—Ä—É–≥',
            'area_type': '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π',
            'building_type': '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∑–∞—Å—Ç—Ä–æ–π–∫–∞',
            'transport': '–í—Å–µ –≤–∏–¥—ã —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞',
            'avg_price': '65 000',
            'avg_cashback': '325 000',
            'rating': 4,
            'properties_count': 9,
            'description': '–°–ú–† (–°–ª–∞–≤—è–Ω—Å–∫–∏–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω) ‚Äî –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π —Ä–∞–π–æ–Ω –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–∏ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞. –°–æ—á–µ—Ç–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –Ω–∞—Å–ª–µ–¥–∏–µ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.',
            'keywords': '–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π, —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π, –∫—É–ª—å—Ç—É—Ä–∞',
            'advantages': [
                '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å',
                '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ',
                '–†–∞–∑–≤–∏—Ç–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞',
                '–ö—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã'
            ],
            'disadvantages': [
                '–í—ã—Å–æ–∫–∏–µ —Ü–µ–Ω—ã',
                '–°—Ç–∞—Ä—ã–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏',
                '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø–∞—Ä–∫–æ–≤–∫–∏'
            ],
            'coordinates': [45.0401, 38.9834],
            'boundaries': [[45.035, 38.98], [45.045, 38.985], [45.04, 38.99], [45.035, 38.985]]
        }
    }
    
    return districts_mapping

def fix_districts_template():
    """–ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç generic —Å—Å—ã–ª–∫–∏ –≤ —à–∞–±–ª–æ–Ω–µ districts.html"""
    
    # Mapping —Ä–∞–π–æ–Ω–æ–≤ –∫ –∏—Ö –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º slug-–∞–º
    district_fixes = [
        ('–ê–≤—Ä–æ—Ä–∞', 'avrora'),
        ('–ë–∞—Å–∫–µ—Ç-–•–æ–ª–ª', 'basket-hall'), 
        ('–î—É–±–∏–Ω–∫–∞', 'dubinka'),
        ('–ï–Ω–∏—Å–µ–π—Å–∫–∏–π', 'eniseyskiy'),
        ('–†–∞–π–æ–Ω –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞', 'aeroport'),
        ('–†–µ–ø–∏–Ω–æ', 'repino'),
        ('–°–ú–†', 'smr'),
        # –î–æ–±–∞–≤–∏–º –µ—â–µ —Ä–∞–π–æ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ —à–∞–±–ª–æ–Ω–µ
        ('–§–µ—Å—Ç–∏–≤–∞–ª—å–Ω—ã–π', 'festivalny'),
        ('–Æ–±–∏–ª–µ–π–Ω—ã–π', 'yubileynyy'),
        ('–ß–µ—Ä–µ–º—É—à–∫–∏', 'cheremushki'),
        ('–ö–æ–º—Å–æ–º–æ–ª—å—Å–∫–∏–π', 'komsomolsky'),
        ('–≠–Ω–∫–∞', 'enka')
    ]
    
    print("üîß –ò—Å–ø—Ä–∞–≤–ª—è—é generic —Å—Å—ã–ª–∫–∏ –≤ templates/districts.html...")
    
    # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª
    with open('templates/districts.html', 'r', encoding='utf-8') as f:
        content = f.read()
    
    # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ generic —Å—Å—ã–ª–∫–∏
    original_generics = len(re.findall(r"district='generic'", content))
    
    # –ü—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞ –≤—Å–µ—Ö generic –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ slug-–∏ –≤ –ø–æ—Ä—è–¥–∫–µ –ø–æ—è–≤–ª–µ–Ω–∏—è
    generic_replacements = [
        'avrora',           # –ê–≤—Ä–æ—Ä–∞  
        'basket-hall',      # –ë–∞—Å–∫–µ—Ç-–•–æ–ª–ª
        'gidrostroitelei',  # –ì–∏–¥—Ä–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π
        'dubinka',          # –î—É–±–∏–Ω–∫–∞
        'eniseyskiy',       # –ï–Ω–∏—Å–µ–π—Å–∫–∏–π
        'festivalny',       # –§–µ—Å—Ç–∏–≤–∞–ª—å–Ω—ã–π  
        'yubileynyy',       # –Æ–±–∏–ª–µ–π–Ω—ã–π
        'cheremushki',      # –ß–µ—Ä–µ–º—É—à–∫–∏
        'komsomolsky',      # –ö–æ–º—Å–æ–º–æ–ª—å—Å–∫–∏–π
        'enka',            # –≠–Ω–∫–∞
        'aeroport',        # –†–∞–π–æ–Ω –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞
        'repino',          # –†–µ–ø–∏–Ω–æ
        'smr',             # –°–ú–†
        'tsentralnyy'      # –î–æ–±–∞–≤–æ—á–Ω—ã–π –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∫–∞—Ä—Ç–æ—á–∫–∏
    ]
    
    # –ó–∞–º–µ–Ω—è–µ–º –ø–æ –æ–¥–Ω–æ–π
    for i, slug in enumerate(generic_replacements):
        if f"district='generic'" in content:
            content = content.replace("district='generic'", f"district='{slug}'", 1)
            print(f"  ‚úì –ó–∞–º–µ–Ω–∏–ª generic #{i+1} –Ω–∞ '{slug}'")
    
    # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ
    with open('templates/districts.html', 'w', encoding='utf-8') as f:
        f.write(content)
    
    remaining_generics = len(re.findall(r"district='generic'", content))
    print(f"‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: {original_generics - remaining_generics}/{original_generics} generic —Å—Å—ã–ª–æ–∫")
    
    return original_generics - remaining_generics

if __name__ == "__main__":
    print("üöÄ –ù–∞—á–∏–Ω–∞—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞...")
    
    # –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ —Ä–∞–π–æ–Ω–∞—Ö
    districts_data = collect_district_data()
    print(f"üìä –°–æ–±—Ä–∞–Ω–æ –¥–∞–Ω–Ω—ã—Ö –æ {len(districts_data)} —Ä–∞–π–æ–Ω–∞—Ö")
    
    # –ò—Å–ø—Ä–∞–≤–ª—è–µ–º generic —Å—Å—ã–ª–∫–∏
    fixed_count = fix_districts_template()
    
    print(f"üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ {fixed_count} generic —Å—Å—ã–ª–æ–∫")
    print("üìã –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ä–∞–π–æ–Ω—ã –≤ get_district_data() –≤ app.py")