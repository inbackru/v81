#!/usr/bin/env python3
"""Initialize blog database with categories and sample articles"""

from app import app, db
from models import BlogCategory, BlogArticle, Manager
from datetime import datetime
import sys

def init_blog_system():
    """Initialize blog system with categories and sample articles"""
    
    with app.app_context():
        try:
            # Create all tables
            db.create_all()
            print("‚úì Database tables created")
            
            # Check if categories already exist
            if BlogCategory.query.count() == 0:
                print("Creating blog categories...")
                
                categories_data = [
                    {
                        'name': '–ö—ç—à–±–µ–∫',
                        'slug': 'cashback',
                        'description': '–°—Ç–∞—Ç—å–∏ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫—ç—à–±–µ–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏',
                        'color': 'green',
                        'icon': 'fas fa-percent',
                        'sort_order': 1
                    },
                    {
                        'name': '–†–∞–π–æ–Ω—ã –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞',
                        'slug': 'districts',
                        'description': '–û–±–∑–æ—Ä—ã —Ä–∞–π–æ–Ω–æ–≤ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞',
                        'color': 'blue',
                        'icon': 'fas fa-map-marker-alt',
                        'sort_order': 2
                    },
                    {
                        'name': '–ò–ø–æ—Ç–µ–∫–∞',
                        'slug': 'mortgage',
                        'description': '–ì–∏–¥—ã –ø–æ –∏–ø–æ—Ç–µ—á–Ω–æ–º—É –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—é –∏ –ª—å–≥–æ—Ç–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∞–º',
                        'color': 'purple',
                        'icon': 'fas fa-home',
                        'sort_order': 3
                    },
                    {
                        'name': '–ù–æ–≤–æ—Å—Ç–∏',
                        'slug': 'news',
                        'description': '–ù–æ–≤–æ—Å—Ç–∏ —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞',
                        'color': 'red',
                        'icon': 'fas fa-newspaper',
                        'sort_order': 4
                    },
                    {
                        'name': '–°–æ–≤–µ—Ç—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º',
                        'slug': 'tips',
                        'description': '–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –Ω–æ–≤–æ—Å—Ç—Ä–æ–µ–∫',
                        'color': 'orange',
                        'icon': 'fas fa-lightbulb',
                        'sort_order': 5
                    },
                    {
                        'name': '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏',
                        'slug': 'investments',
                        'description': '–°—Ç–∞—Ç—å–∏ –æ–± –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è—Ö –≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å',
                        'color': 'yellow',
                        'icon': 'fas fa-chart-line',
                        'sort_order': 6
                    }
                ]
                
                for cat_data in categories_data:
                    category = BlogCategory(**cat_data)
                    db.session.add(category)
                
                db.session.commit()
                print(f"‚úì Created {len(categories_data)} blog categories")
            else:
                print("‚úì Blog categories already exist")
            
            # Get or create a demo manager for articles
            demo_manager = Manager.query.filter_by(email='demo@inback.ru').first()
            if not demo_manager:
                # Create demo manager if doesn't exist
                demo_manager = Manager(
                    email='demo@inback.ru',
                    first_name='–î–µ–º–æ',
                    last_name='–ú–µ–Ω–µ–¥–∂–µ—Ä',
                    phone='8 (862) 266-62-16',
                    position='–ö–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä',
                    is_active=True
                )
                demo_manager.set_password('demo123')
                db.session.add(demo_manager)
                db.session.commit()
                print("‚úì Created demo manager for blog")
            
            # Check if sample articles already exist
            if BlogArticle.query.count() == 0:
                print("Creating sample blog articles...")
                
                # Get categories
                cashback_cat = BlogCategory.query.filter_by(slug='cashback').first()
                districts_cat = BlogCategory.query.filter_by(slug='districts').first()
                mortgage_cat = BlogCategory.query.filter_by(slug='mortgage').first()
                tips_cat = BlogCategory.query.filter_by(slug='tips').first()
                
                articles_data = [
                    {
                        'title': '–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫—ç—à–±–µ–∫ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏',
                        'slug': 'maximum-cashback-novostroyka',
                        'excerpt': '–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é –∫—ç—à–±–µ–∫–∞ –¥–æ 10% –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã –≤ –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–µ. –†–∞–∑–±–∏—Ä–∞–µ–º –≤—Å–µ —Å–ø–æ—Å–æ–±—ã –∏ —É—Å–ª–æ–≤–∏—è.',
                        'content': '''<h2>–ß—Ç–æ —Ç–∞–∫–æ–µ –∫—ç—à–±–µ–∫ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</h2>
<p>–ö—ç—à–±–µ–∫ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ ‚Äî —ç—Ç–æ –≤–æ–∑–≤—Ä–∞—Ç —á–∞—Å—Ç–∏ –¥–µ–Ω–µ–≥, –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω—ã—Ö –Ω–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã. –í –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ 10% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫–≤–∞—Ä—Ç–∏—Ä—ã.</p>

<h3>–û—Å–Ω–æ–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è –∫—ç—à–±–µ–∫–∞:</h3>
<ul>
<li><strong>–ß–µ—Ä–µ–∑ –∞–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤</strong> ‚Äî –¥–æ 5% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏</li>
<li><strong>–£—á–∞—Å—Ç–∏–µ –≤ –∞–∫—Ü–∏—è—Ö –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–∞</strong> ‚Äî –¥–æ 3% –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</li>
<li><strong>–ò–ø–æ—Ç–µ—á–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</strong> ‚Äî –¥–æ 2% –æ—Ç –±–∞–Ω–∫–∞</li>
</ul>

<h3>–£—Å–ª–æ–≤–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—ç—à–±–µ–∫–∞</h3>
<p>–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–±–µ–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–±–ª—é–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —É—Å–ª–æ–≤–∏—è:</p>
<ol>
<li>–û–±—Ä–∞—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞</li>
<li>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞ –≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ä–æ–∫–∏</li>
<li>–ü–æ–ª–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –¥–æ–≥–æ–≤–æ—Ä–æ–º</li>
</ol>

<p>–ù–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è InBack –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫—ç—à–±–µ–∫ –∏ –ø—Ä–æ–≤–µ–¥–µ—Ç —á–µ—Ä–µ–∑ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–∫—É–ø–∫–∏.</p>''',
                        'category_id': cashback_cat.id if cashback_cat else 1,
                        'author_id': demo_manager.id,
                        'status': 'published',
                        'published_at': datetime.utcnow(),
                        'is_featured': True,
                        'reading_time': 5,
                        'views_count': 1250
                    },
                    {
                        'title': '–û–±–∑–æ—Ä —Ä–∞–π–æ–Ω–∞ –ß–µ—Ä–µ–º—É—à–∫–∏: –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏ 2024',
                        'slug': 'cheremushki-district-review-2024',
                        'excerpt': '–ü–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä –ß–µ—Ä–µ–º—É—à–µ–∫: —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, —à–∫–æ–ª—ã, –¥–µ—Ç—Å–∞–¥—ã, —Ç–æ—Ä–≥–æ–≤—ã–µ —Ü–µ–Ω—Ç—Ä—ã –∏ –ª—É—á—à–∏–µ –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–π–æ–Ω–∞.',
                        'content': '''<h2>–ß–µ—Ä–µ–º—É—à–∫–∏ ‚Äî –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞</h2>
<p>–†–∞–π–æ–Ω –ß–µ—Ä–µ–º—É—à–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∏ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –º–æ–ª–æ–¥—ã–µ —Å–µ–º—å–∏ —Å–≤–æ–µ–π —Ä–∞–∑–≤–∏—Ç–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é.</p>

<h3>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</h3>
<ul>
<li>15 –º–∏–Ω—É—Ç –¥–æ —Ü–µ–Ω—Ç—Ä–∞ –≥–æ—Ä–æ–¥–∞</li>
<li>–†–∞–∑–≤–∏—Ç–∞—è —Å–µ—Ç—å –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞</li>
<li>–ë–ª–∏–∑–æ—Å—Ç—å –∫ –∫—Ä—É–ø–Ω—ã–º –∞–≤—Ç–æ–º–∞–≥–∏—Å—Ç—Ä–∞–ª—è–º</li>
</ul>

<h3>–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–π–æ–Ω–∞</h3>
<ul>
<li><strong>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:</strong> 8 —à–∫–æ–ª, 12 –¥–µ—Ç—Å–∫–∏—Ö —Å–∞–¥–æ–≤</li>
<li><strong>–ú–µ–¥–∏—Ü–∏–Ω–∞:</strong> –ø–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∏, —á–∞—Å—Ç–Ω—ã–µ –º–µ–¥—Ü–µ–Ω—Ç—Ä—ã</li>
<li><strong>–¢–æ—Ä–≥–æ–≤–ª—è:</strong> –¢–†–ö "OZ –ú–æ–ª–ª", –≥–∏–ø–µ—Ä–º–∞—Ä–∫–µ—Ç—ã</li>
<li><strong>–°–ø–æ—Ä—Ç:</strong> —Ñ–∏—Ç–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä—ã, —Å—Ç–∞–¥–∏–æ–Ω—ã, –ø–∞—Ä–∫–∏</li>
</ul>

<h3>–õ—É—á—à–∏–µ –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏ –ß–µ—Ä–µ–º—É—à–µ–∫</h3>
<p>–í —Ä–∞–π–æ–Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–µ–∫—Ç—ã –æ—Ç –≤–µ–¥—É—â–∏—Ö –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–æ–≤ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–ª—É—á–µ–Ω–∏—è –∫—ç—à–±–µ–∫–∞ –¥–æ 8%.</p>''',
                        'category_id': districts_cat.id if districts_cat else 2,
                        'author_id': demo_manager.id,
                        'status': 'published',
                        'published_at': datetime.utcnow(),
                        'is_featured': False,
                        'reading_time': 4,
                        'views_count': 890
                    },
                    {
                        'title': '–õ—å–≥–æ—Ç–Ω–∞—è –∏–ø–æ—Ç–µ–∫–∞ 2024: –ø–æ–ª–Ω—ã–π –≥–∏–¥ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º',
                        'slug': 'preferential-mortgage-2024-guide',
                        'excerpt': '–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª—å–≥–æ—Ç–Ω–æ–π –∏–ø–æ—Ç–µ–∫–∏: —Å–µ–º–µ–π–Ω–∞—è, IT-–∏–ø–æ—Ç–µ–∫–∞, —Å–µ–ª—å—Å–∫–∞—è –∏–ø–æ—Ç–µ–∫–∞. –£—Å–ª–æ–≤–∏—è, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –∫–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å.',
                        'content': '''<h2>–õ—å–≥–æ—Ç–Ω—ã–µ –∏–ø–æ—Ç–µ—á–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ 2024 –≥–æ–¥—É</h2>
<p>–í 2024 –≥–æ–¥—É –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª—å–≥–æ—Ç–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º –∏–ø–æ—Ç–µ—á–Ω–æ–≥–æ –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –Ω–∞ –ø–æ–∫—É–ø–∫–µ –∂–∏–ª—å—è.</p>

<h3>–°–µ–º–µ–π–Ω–∞—è –∏–ø–æ—Ç–µ–∫–∞</h3>
<ul>
<li><strong>–°—Ç–∞–≤–∫–∞:</strong> –¥–æ 6% –≥–æ–¥–æ–≤—ã—Ö</li>
<li><strong>–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å:</strong> –æ—Ç 15%</li>
<li><strong>–°—Ä–æ–∫:</strong> –¥–æ 30 –ª–µ—Ç</li>
<li><strong>–£—Å–ª–æ–≤–∏–µ:</strong> —Å–µ–º—å–∏ —Å –¥–µ—Ç—å–º–∏, —Ä–æ–∂–¥–µ–Ω–Ω—ã–º–∏ —Å 2018 –≥–æ–¥–∞</li>
</ul>

<h3>IT-–∏–ø–æ—Ç–µ–∫–∞</h3>
<ul>
<li><strong>–°—Ç–∞–≤–∫–∞:</strong> –¥–æ 5% –≥–æ–¥–æ–≤—ã—Ö</li>
<li><strong>–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å:</strong> –æ—Ç 15%</li>
<li><strong>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞:</strong> –¥–æ 18 –º–ª–Ω —Ä—É–±–ª–µ–π</li>
<li><strong>–£—Å–ª–æ–≤–∏–µ:</strong> —Ä–∞–±–æ—Ç–∞ –≤ IT-—Å—Ñ–µ—Ä–µ</li>
</ul>

<h3>–ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –ª—å–≥–æ—Ç–Ω—É—é –∏–ø–æ—Ç–µ–∫—É</h3>
<ol>
<li>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É</li>
<li>–°–æ–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</li>
<li>–ü–æ–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –≤ –±–∞–Ω–∫</li>
<li>–ü–æ–ª—É—á–∏—Ç–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ</li>
<li>–í—ã–±–µ—Ä–∏—Ç–µ –∫–≤–∞—Ä—Ç–∏—Ä—É</li>
</ol>

<p>–ú—ã –ø–æ–º–æ–∂–µ–º –ø–æ–¥–æ–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –∏ –ø—Ä–æ–≤–µ–¥–µ–º —á–µ—Ä–µ–∑ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è.</p>''',
                        'category_id': mortgage_cat.id if mortgage_cat else 3,
                        'author_id': demo_manager.id,
                        'status': 'published',
                        'published_at': datetime.utcnow(),
                        'is_featured': True,
                        'reading_time': 6,
                        'views_count': 2150
                    },
                    {
                        'title': '10 –≥–ª–∞–≤–Ω—ã—Ö –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏',
                        'slug': '10-mistakes-buying-new-apartment',
                        'excerpt': '–†–∞–∑–±–∏—Ä–∞–µ–º —Å–∞–º—ã–µ —á–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –Ω–æ–≤–æ—Å—Ç—Ä–æ–µ–∫ –∏ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ–º, –∫–∞–∫ –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤—Ä–µ–º—è –∏ –¥–µ–Ω—å–≥–∏.',
                        'content': '''<h2>–¢–æ–ø-10 –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏</h2>
<p>–ü–æ–∫—É–ø–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã –≤ –Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫–µ ‚Äî —Å–µ—Ä—å–µ–∑–Ω—ã–π —à–∞–≥. –†–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ–º –æ —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö –æ—à–∏–±–∫–∞—Ö –∏ —Å–ø–æ—Å–æ–±–∞—Ö –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å.</p>

<h3>1. –ù–µ –∏–∑—É—á–∏–ª–∏ –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–∞</h3>
<p>–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ–ø—É—Ç–∞—Ü–∏—é –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–∞, –µ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã.</p>

<h3>2. –ù–µ –ø—Ä–æ—á–∏—Ç–∞–ª–∏ –¥–æ–≥–æ–≤–æ—Ä –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ</h3>
<p>–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∏—Ç–µ –≤—Å–µ —É—Å–ª–æ–≤–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞ –¥–æ–ª–µ–≤–æ–≥–æ —É—á–∞—Å—Ç–∏—è, –æ—Å–æ–±–µ–Ω–Ω–æ —Å—Ä–æ–∫–∏ —Å–¥–∞—á–∏ –∏ —à—Ç—Ä–∞—Ñ—ã.</p>

<h3>3. –ù–µ —É—á–ª–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–∞–π–æ–Ω–∞</h3>
<p>–û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, —à–∫–æ–ª—ã, –º–∞–≥–∞–∑–∏–Ω—ã –∏ –º–µ–¥—É—á—Ä–µ–∂–¥–µ–Ω–∏—è.</p>

<h3>4. –ü–æ—Ç–æ—Ä–æ–ø–∏–ª–∏—Å—å —Å –≤—ã–±–æ—Ä–æ–º</h3>
<p>–°—Ä–∞–≤–Ω–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –∏–∑—É—á–∏—Ç–µ —Ä—ã–Ω–æ–∫, –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–π—Ç–µ—Å—å —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏.</p>

<h3>5. –ó–∞–±—ã–ª–∏ –ø—Ä–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</h3>
<p>–£—á–∏—Ç—ã–≤–∞–π—Ç–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ, —Ä–µ–º–æ–Ω—Ç, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π.</p>

<p>–ò–∑–±–µ–∂–∞—Ç—å —ç—Ç–∏—Ö –∏ –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫ –ø–æ–º–æ–∂–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏.</p>''',
                        'category_id': tips_cat.id if tips_cat else 5,
                        'author_id': demo_manager.id,
                        'status': 'published',
                        'published_at': datetime.utcnow(),
                        'is_featured': False,
                        'reading_time': 3,
                        'views_count': 670
                    }
                ]
                
                for article_data in articles_data:
                    article = BlogArticle(**article_data)
                    db.session.add(article)
                
                db.session.commit()
                print(f"‚úì Created {len(articles_data)} sample articles")
                
                # Update category article counts
                for category in BlogCategory.query.all():
                    category.articles_count = BlogArticle.query.filter_by(category_id=category.id).count()
                
                db.session.commit()
                print("‚úì Updated category article counts")
            else:
                print("‚úì Sample articles already exist")
            
            print("\nüéâ Blog system successfully initialized!")
            print("\nYou can now:")
            print("- View blog at: /blog")
            print("- Manage blog at: /admin/blog-manager (requires manager login)")
            print("- Manager demo login: demo@inback.ru / demo123")
            
        except Exception as e:
            print(f"‚ùå Error initializing blog system: {e}")
            db.session.rollback()
            sys.exit(1)

if __name__ == '__main__':
    init_blog_system()