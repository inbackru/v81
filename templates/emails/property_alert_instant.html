{% extends "emails/base_email.html" %}

{% block title %}–ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –ø–æ –≤–∞—à–µ–º—É –ø–æ–∏—Å–∫—É - InBack{% endblock %}

{% block content %}
<h1>üè† –ù–æ–≤—ã–π –æ–±—ä–µ–∫—Ç!</h1>

<p>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {{ user.full_name }}!</p>

<p>–ü–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—à–µ–º—É —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–º—É –ø–æ–∏—Å–∫—É <strong>"{{ search.name }}"</strong>.</p>

<!-- Property Card -->
<div style="border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; margin: 24px 0; background: white;">
    {% if property.main_image %}
    <div style="width: 100%; height: 240px; overflow: hidden; background: #f3f4f6;">
        <img src="{{ property.main_image }}" alt="{{ property.title }}" 
             style="width: 100%; height: 100%; object-fit: cover;">
    </div>
    {% endif %}
    
    <div style="padding: 24px;">
        <h2 style="margin: 0 0 12px 0; font-size: 22px; font-weight: 600; color: #1d1d1f;">
            {{ property.title }}
        </h2>
        
        <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 16px;">
            {% if property.rooms is not none %}
            <span style="background: #f0f9ff; color: #0369a1; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 500;">
                {% if property.rooms == 0 %}–°—Ç—É–¥–∏—è{% else %}{{ property.rooms }}-–∫–æ–º–Ω.{% endif %}
            </span>
            {% endif %}
            
            {% if property.area %}
            <span style="background: #f0fdf4; color: #15803d; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 500;">
                {{ property.area|round(1) }} –º¬≤
            </span>
            {% endif %}
            
            {% if property.floor and property.total_floors %}
            <span style="background: #fef3c7; color: #92400e; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 500;">
                {{ property.floor }}/{{ property.total_floors }} —ç—Ç–∞–∂
            </span>
            {% endif %}
        </div>
        
        {% if property.price %}
        <div style="margin: 16px 0;">
            <div style="font-size: 32px; font-weight: 700; color: #0088CC; line-height: 1.2;">
                {{ '{:,.0f}'.format(property.price).replace(',', ' ') }} ‚ÇΩ
            </div>
            {% if property.price_per_sqm %}
            <div style="font-size: 14px; color: #6b7280; margin-top: 4px;">
                {{ '{:,.0f}'.format(property.price_per_sqm).replace(',', ' ') }} ‚ÇΩ/–º¬≤
            </div>
            {% endif %}
        </div>
        {% endif %}
        
        {% if property.residential_complex %}
        <p style="margin: 12px 0; color: #424245; font-size: 15px;">
            <strong>–ñ–ö:</strong> {{ property.residential_complex.name }}
        </p>
        {% endif %}
        
        {% if property.developer %}
        <p style="margin: 12px 0; color: #424245; font-size: 15px;">
            <strong>–ó–∞—Å—Ç—Ä–æ–π—â–∏–∫:</strong> {{ property.developer.name }}
        </p>
        {% endif %}
        
        {% if property.parsed_district or property.district %}
        <p style="margin: 12px 0; color: #424245; font-size: 15px;">
            <strong>–†–∞–π–æ–Ω:</strong> {{ property.parsed_district or property.district.name }}
        </p>
        {% endif %}
        
        <a href="{{ property_url }}" class="btn-primary" style="display: inline-block; text-align: center; margin-top: 16px;">
            –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ–±—ä–µ–∫—Ç
        </a>
    </div>
</div>

<!-- Search Info -->
<div class="highlight-box">
    <h3 style="margin: 0 0 12px 0; font-size: 16px; font-weight: 600; color: #1d1d1f;">
        –û –≤–∞—à–µ–º –ø–æ–∏—Å–∫–µ "{{ search.name }}"
    </h3>
    <p style="margin: 0; font-size: 14px; color: #6b7280;">
        {% if search.property_type %}–¢–∏–ø: {{ search.property_type }}{% endif %}
        {% if search.price_min or search.price_max %}
        <br>–¶–µ–Ω–∞: {% if search.price_min %}–æ—Ç {{ '{:,.0f}'.format(search.price_min).replace(',', ' ') }} ‚ÇΩ{% endif %}
        {% if search.price_max %}–¥–æ {{ '{:,.0f}'.format(search.price_max).replace(',', ' ') }} ‚ÇΩ{% endif %}
        {% endif %}
        {% if search.size_min or search.size_max %}
        <br>–ü–ª–æ—â–∞–¥—å: {% if search.size_min %}–æ—Ç {{ search.size_min }} –º¬≤{% endif %}
        {% if search.size_max %}–¥–æ {{ search.size_max }} –º¬≤{% endif %}
        {% endif %}
    </p>
</div>

<!-- Unsubscribe -->
<div style="margin-top: 32px; padding-top: 24px; border-top: 1px solid #e5e7eb; text-align: center;">
    <p style="font-size: 13px; color: #9ca3af; margin: 0;">
        –í—ã –ø–æ–ª—É—á–∏–ª–∏ —ç—Ç–æ –ø–∏—Å—å–º–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–∫–ª—é—á–∏–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ "{{ search.name }}".<br>
        <a href="{{ unsubscribe_url }}" style="color: #6b7280; text-decoration: underline;">
            –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        </a>
    </p>
</div>
{% endblock %}
